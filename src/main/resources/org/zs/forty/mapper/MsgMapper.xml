<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zs.forty.mapper.MsgMapper">
    <insert id="add" useGeneratedKeys="true" keyProperty="msg_id"
            parameterType="org.zs.forty.model.entity.Msg">
        insert into t_msg
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="senderid != null and senderid != ''">
                sender_id,
            </if>
            <if test="receiverid != null and receiverid != ''">
                receiver_id,
            </if>
            <if test="msgContent != null and msgContent != ''">
                msg_content,
            </if>
            <if test="msgType != null and msgType != ''">
                msg_type,
            </if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            <if test="senderid != null and senderid != ''">
                #{senderid},
            </if>
            <if test="receiverid != null and receiverid != ''">
                #{receiverid},
            </if>
            <if test="msgContent != null and msgContent != ''">
                #{msgContent},
            </if>
            <if test="msgType != null and msgType != ''">
                #{msgType},
            </if>
        </trim>
    </insert>
    <update id="update">
        update t_msg
        <set>
            <if test="senderid != null and senderid != ''">
               send_id = #{senderid},
            </if>
            <if test="receiverid != null and receiverid != ''">
               receiver_id = #{receiverid},
            </if>
            <if test="msgContent != null and msgContent != ''">
                msg_content = #{msgContent},
            </if>
            <if test="msgType != null and msgType != ''">
                msg_type = #{msgType},
            </if>
        </set>
        where msg_id = #{msgid}
        and is_delete=0
    </update>
    <update id="deleteMsgById">
        UPDATE t_msg SET is_delete = 1 WHERE msg_id = #{msg_id} AND is_delete = 0
    </update>

    <select id="selectMsgById" resultType="org.zs.forty.model.entity.Msg">
        select * from t_msg where msg_id = #{msg_id} and is_delete = 0
    </select>

</mapper>